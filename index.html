<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>PSControl - Sistema de Gestão de Clientes</title>
    <meta name="description" content="Sistema completo de gerenciamento de clientes, planos e vendas" />
    <meta name="author" content="PSControl" />
    <meta name="theme-color" content="#e50914" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="PSControl" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no" />

    <!-- PWA Manifest - dinamicamente selecionado -->
    <link rel="manifest" id="pwa-manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" id="apple-touch-icon" href="/icon-192.png" />
    
    <script>
      // Detecta se está no subdomínio admin e ajusta o manifest
      (function() {
        var isAdminSubdomain = window.location.hostname.startsWith('admin.');
        var isAdminPath = window.location.pathname.startsWith('/admin');
        
        if (isAdminSubdomain || isAdminPath) {
          var manifest = document.getElementById('pwa-manifest');
          var appleIcon = document.getElementById('apple-touch-icon');
          if (manifest) manifest.href = '/manifest-admin.json';
          if (appleIcon) appleIcon.href = '/admin-icon-192.png';
          
          // Atualiza theme-color para admin
          var themeColor = document.querySelector('meta[name="theme-color"]');
          if (themeColor) themeColor.content = '#1e40af';
        }
      })();
    </script>

    <!-- Open Graph -->
    <meta property="og:title" content="PSControl - Sistema de Gestão de Clientes" />
    <meta property="og:description" content="Sistema completo de gerenciamento de clientes, planos e vendas" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/icon-512.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@PSControl" />
    <meta name="twitter:image" content="/icon-512.png" />
  </head>

  <body>
    <!-- Script de inicialização do tema para evitar flash -->
    <script>
      (function() {
        try {
          var theme = localStorage.getItem('app-theme-cache');
          var validThemes = ['netflix', 'neon-blue', 'emerald', 'purple', 'orange'];
          if (theme && validThemes.indexOf(theme) !== -1) {
            document.documentElement.classList.add('theme-' + theme);
          }
        } catch (e) {}
      })();
    </script>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
