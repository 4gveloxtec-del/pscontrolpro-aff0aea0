# =============================================================================
# PSControl Pro - Complete Environment Variables Template
# =============================================================================
# 
# This file documents ALL environment variables used by this application.
# Copy this file to .env and fill in the values for local development.
#
# SECURITY WARNING: Never commit .env files with real values to version control!
#
# Last Updated: 2026-01-24
# =============================================================================


# =============================================================================
# SECTION 1: FRONTEND VARIABLES (VITE)
# =============================================================================
# All frontend variables MUST start with VITE_ to be accessible in the browser.
# These are compiled into the JavaScript bundle at build time.


# -----------------------------------------------------------------------------
# 1.1 SUPABASE/LOVABLE CLOUD CONNECTION (Required - Critical)
# -----------------------------------------------------------------------------
# Without these, the application will NOT start.
# Get values from: Lovable Cloud → Settings → Backend → Connection Info
# Or from: Supabase Dashboard → Project Settings → API

# [CRITICAL] Your Supabase/Lovable Cloud project URL
# Format: https://<project-id>.supabase.co
VITE_SUPABASE_URL=

# [CRITICAL] Your Supabase anon/public key (safe to expose in browser)
# This key has limited permissions defined by RLS policies
# Lovable Cloud uses VITE_SUPABASE_PUBLISHABLE_KEY
# Standard Supabase uses VITE_SUPABASE_ANON_KEY
# Both are supported - use whichever matches your setup
VITE_SUPABASE_PUBLISHABLE_KEY=
# VITE_SUPABASE_ANON_KEY=  # Alternative name (fallback)

# [CRITICAL] Your Supabase project ID
# This is the '<project-id>' part of the URL above
VITE_SUPABASE_PROJECT_ID=


# -----------------------------------------------------------------------------
# 1.2 DEBUG & DEVELOPMENT (Optional)
# -----------------------------------------------------------------------------

# Enable verbose debug logging in the browser console
# Set to "true" to enable (default: false)
# VITE_DEBUG_MODE=false


# =============================================================================
# SECTION 2: BACKEND SECRETS (EDGE FUNCTIONS)
# =============================================================================
# These secrets are configured in the Lovable Cloud dashboard or Supabase 
# dashboard, NOT in .env files. They are accessed via Deno.env.get() in 
# Edge Functions.
#
# Configuration location:
# - Lovable Cloud: Settings → Backend → Secrets
# - Supabase: Project Settings → Edge Functions → Secrets
# =============================================================================


# -----------------------------------------------------------------------------
# 2.1 AUTO-INJECTED BY SUPABASE (Do NOT configure manually)
# -----------------------------------------------------------------------------
# These are automatically available in all Edge Functions:
#
# SUPABASE_URL          - Same as VITE_SUPABASE_URL
# SUPABASE_ANON_KEY     - Same as VITE_SUPABASE_PUBLISHABLE_KEY
# SUPABASE_SERVICE_ROLE_KEY - Admin key with full database access (secret!)


# -----------------------------------------------------------------------------
# 2.2 DATA ENCRYPTION (Required for security features)
# -----------------------------------------------------------------------------
# Used for AES-256-GCM encryption of sensitive client data

# [REQUIRED] 32-character encryption key for data encryption/decryption
# Generate with: openssl rand -base64 32
# Used by: supabase/functions/crypto/index.ts
# ENCRYPTION_KEY=<32-character-random-string>


# -----------------------------------------------------------------------------
# 2.3 PUSH NOTIFICATIONS - WEB PUSH (Required for notifications)
# -----------------------------------------------------------------------------
# VAPID (Voluntary Application Server Identification) keys for Web Push API
# Generate with: npx web-push generate-vapid-keys

# [REQUIRED] VAPID public key (can be shared with clients)
# Used by: supabase/functions/get-vapid-public-key/index.ts
# VAPID_PUBLIC_KEY=<base64-encoded-public-key>

# [REQUIRED] VAPID private key (keep secret!)
# Used by: supabase/functions/send-push-notification/index.ts
# VAPID_PRIVATE_KEY=<base64-encoded-private-key>

# [REQUIRED] VAPID subject - contact email or URL for push service
# Format: mailto:your@email.com or https://yourdomain.com
# VAPID_SUBJECT=mailto:admin@example.com


# -----------------------------------------------------------------------------
# 2.4 AI FEATURES (Required for AI-powered features)
# -----------------------------------------------------------------------------

# [REQUIRED] Lovable API Key for AI features (server icon generation, etc.)
# Obtain from: Lovable Dashboard → API Keys
# Used by: supabase/functions/generate-server-icon/index.ts
# LOVABLE_API_KEY=<your-lovable-api-key>


# -----------------------------------------------------------------------------
# 2.5 DATABASE DIRECT ACCESS (Optional - for advanced functions)
# -----------------------------------------------------------------------------

# PostgreSQL connection string for direct database access
# Only needed for specific Edge Functions that require raw SQL
# Format: postgresql://user:password@host:port/database
# Used by: supabase/functions/setup-notification-settings/index.ts
# SUPABASE_DB_URL=postgresql://postgres:password@db.xxx.supabase.co:5432/postgres


# =============================================================================
# SECTION 3: EXTERNAL INTEGRATIONS (Configure as needed)
# =============================================================================


# -----------------------------------------------------------------------------
# 3.1 WHATSAPP / EVOLUTION API (Required for WhatsApp automation)
# -----------------------------------------------------------------------------
# Configuration is stored in the database (whatsapp_configs table), not in
# environment variables. This allows per-seller configuration.
#
# Each seller configures their own:
# - Evolution API URL
# - Instance Name
# - API Key
#
# These are managed through the application UI at /whatsapp-automation


# =============================================================================
# SECTION 4: DEPLOYMENT CONFIGURATION
# =============================================================================


# -----------------------------------------------------------------------------
# 4.1 VERCEL DEPLOYMENT
# -----------------------------------------------------------------------------
# Required environment variables in Vercel Dashboard:
#
# 1. Go to: https://vercel.com/dashboard
# 2. Select your project
# 3. Go to: Settings → Environment Variables
# 4. Add these variables:
#
#    VITE_SUPABASE_URL             = https://xxx.supabase.co
#    VITE_SUPABASE_PUBLISHABLE_KEY = eyJhbGciOiJIUzI1NiIs...
#    VITE_SUPABASE_PROJECT_ID      = xxx
#
# 5. Enable for: Production, Preview, AND Development
# 6. Click "Redeploy" to apply changes
#
# Build Settings:
#    Framework Preset: Vite
#    Build Command:    npm run build
#    Output Directory: dist
#    Install Command:  npm install


# -----------------------------------------------------------------------------
# 4.2 LOCAL DEVELOPMENT
# -----------------------------------------------------------------------------
# Steps to run locally:
#
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Fill in the required VITE_SUPABASE_* values
#
# 3. Install dependencies:
#    npm install
#
# 4. Start development server:
#    npm run dev
#
# 5. Open http://localhost:8080


# =============================================================================
# SECTION 5: VARIABLE REFERENCE TABLE
# =============================================================================
#
# | Variable                       | Location    | Critical | Description                    |
# |--------------------------------|-------------|----------|--------------------------------|
# | VITE_SUPABASE_URL              | Frontend    | YES      | Supabase project URL           |
# | VITE_SUPABASE_PUBLISHABLE_KEY  | Frontend    | YES      | Supabase anon key              |
# | VITE_SUPABASE_PROJECT_ID       | Frontend    | YES      | Supabase project ID            |
# | VITE_DEBUG_MODE                | Frontend    | NO       | Enable debug logging           |
# | ENCRYPTION_KEY                 | Edge Func   | YES      | Data encryption key            |
# | VAPID_PUBLIC_KEY               | Edge Func   | YES      | Push notification public key   |
# | VAPID_PRIVATE_KEY              | Edge Func   | YES      | Push notification private key  |
# | VAPID_SUBJECT                  | Edge Func   | YES      | Push notification contact      |
# | LOVABLE_API_KEY                | Edge Func   | NO       | AI features API key            |
# | SUPABASE_DB_URL                | Edge Func   | NO       | Direct PostgreSQL connection   |
#
# =============================================================================


# =============================================================================
# SECTION 6: TROUBLESHOOTING
# =============================================================================
#
# Problem: Blank/white screen after deploy
# Solution: Missing VITE_SUPABASE_* variables. Add them in Vercel dashboard.
#
# Problem: "ENCRYPTION_KEY not set" error in logs
# Solution: Add ENCRYPTION_KEY secret in Lovable Cloud → Backend → Secrets
#
# Problem: Push notifications not working
# Solution: Add all three VAPID_* secrets in backend configuration
#
# Problem: Server icon generation fails
# Solution: Add LOVABLE_API_KEY secret in backend configuration
#
# Problem: "Cannot read properties of undefined" on startup
# Solution: Check that all VITE_* variables are set correctly
#
# =============================================================================
